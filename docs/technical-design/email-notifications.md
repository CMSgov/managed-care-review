# Email Notifications

Certain contract actions in the MC-Review app will initiate email notifications sent to the State and CMS. These actions include:
- New contract submission
- Unlocking a submitted contract
- Resubmitting an unlocked contract
- New Q&A question submitted
- New Q&A response submitted

The email recipients for each action vary depending on contract data, such as contract type, the state the contract applies to, and the designated state contacts for the contract. The CMS email recipients for contract submission, unlock, and resubmission are generated using the helper function `generateCMSReviewerEmails`.

### New contract submission
- #### State email receivers:
    - **stateContacts**: All contacts in the latest submitted contract revision's `formData.stateContacts`.
    - **submitterEmails**: User emails that submitted/resubmitted the contract. In resolvers, `submitterEmails` is generated by `contractSubmitters` function that loops through revisions and adding submitInfo.updatedBy emails to a string array.
    - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
- #### CMS email receivers:
    - `CONTRACT_ONLY` submissions
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
        - **dmcpEmails**: DMCP primary inbox from parameter store `/configuration/email/dmcp`.
    - `CONTRACT_AND_RATES` submissions
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
        - **dmcpEmails**: DMCP primary inbox from parameter store `/configuration/email/dmcp`.
        - **oactEmails**: OACT primary inbox from parameter store `/configuration/email/oact`.
    - `CHIP` and State of `PR` submissions
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
### Unlocking a submitted contract
- #### State email receivers:
    - **stateContacts**: All contacts in the latest submitted contract revision's `formData.stateContacts`.
    - **submitterEmails**: User emails that submitted/resubmitted the contract. In resolvers, `submitterEmails` is generated by `contractSubmitters` function that loops through revisions and adding submitInfo.updatedBy emails to a string array.
    - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
- #### CMS email receivers:
    - `CONTRACT_ONLY` submissions
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
        - **dmcpEmails**: DMCP primary inbox from parameter store `/configuration/email/dmcp`.
    - `CONTRACT_AND_RATES` submissions
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
        - **dmcpEmails**: DMCP primary inbox from parameter store `/configuration/email/dmcp`.
        - **oactEmails**: OACT primary inbox from parameter store `/configuration/email/oact`.
    - `CHIP` and State of `PR` submissions
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
### Resubmitting an unlocked contract
- #### State email receivers:
    - **stateContacts**: All contacts in the latest submitted contract revision's `formData.stateContacts`.
    - **submitterEmails**: User emails that submitted/resubmitted the contract. In resolvers, `submitterEmails` is generated by `contractSubmitters` function that loops through revisions and adding submitInfo.updatedBy emails to a string array.
    - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
- #### CMS email receivers:
    - `CONTRACT_ONLY` submissions
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
        - **dmcpEmails**: DMCP primary inbox from parameter store `/configuration/email/dmcp`.
    - `CONTRACT_AND_RATES` submissions
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
        - **dmcpEmails**: DMCP primary inbox from parameter store `/configuration/email/dmcp`.
        - **oactEmails**: OACT primary inbox from parameter store `/configuration/email/oact`.
    - `CHIP` and State of `PR` submissions
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
### New Q&A question submitted
- #### State email receivers:
    - **stateContacts**: All contacts in the latest submitted contract revision's `formData.stateContacts`.
    - **submitterEmails**: User emails that submitted/resubmitted the contract. In resolvers, `submitterEmails` is generated by `contractSubmitters` function that loops through revisions and adding submitInfo.updatedBy emails to a string array.
    - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
- #### CMS email receivers:
  - Questions from `DMCO`
    - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
    - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
  - Questions from `DMCP`
    - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
    - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
    - **dmcpReviewEmails**: DMCP inbox for external communication and Q&A notifications `/configuration/email/dmcpReview`.
  - Questions from `OACT`
    - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
    - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
    - **oactEmails**: OACT primary inbox from parameter store `/configuration/email/oact`.
### New Q&A response submitted
- #### State email receivers:
    - **stateContacts**: All contacts in the latest submitted contract revision's `formData.stateContacts`.
    - **submitterEmails**: User emails that submitted/resubmitted the contract. In resolvers, `submitterEmails` is generated by `contractSubmitters` function that loops through revisions and adding submitInfo.updatedBy emails to a string array.
    - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
- #### CMS email receivers:
    - Responses to Questions from `DMCO`
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
    - Responses to Questions from `DMCP`
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
        - **dmcpReviewEmails**: DMCP inbox for external communication and Q&A notifications `/configuration/email/dmcpReview`.
    - Responses to Questions from `OACT`
        - **devReviewTeamEmails**: Dev team email address from parameter store `/configuration/email/reviewTeamAddresses`.
        - **stateAnalystsEmails**: specific state analyst emails from parameter store `/configuration/[STATE]/stateanalysts/email`.
        - **oactEmails**: OACT primary inbox from parameter store `/configuration/email/oact`.
